{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/pradh/Desktop/devrev/TheBookCrafter.com/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pradh\\\\Desktop\\\\devrev\\\\TheBookCrafter.com\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import\"./Cart.css\";import{useEffect}from\"react\";import jwt_decode from\"jwt-decode\";import axios from\"axios\";import{Link}from\"react-router-dom\";import{useWishlist,useCart,HorizontalProductCard,ShoppingBill}from\"../../index\";import Lottie from'react-lottie';import CartLottie from\"../../Assets/Icons/cart.json\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Cart(){var _useWishlist=useWishlist(),userWishlist=_useWishlist.userWishlist,dispatchUserWishlist=_useWishlist.dispatchUserWishlist;var _useCart=useCart(),userCart=_useCart.userCart,dispatchUserCart=_useCart.dispatchUserCart;var cartObj={loop:true,autoplay:true,animationData:CartLottie,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}};useEffect(function(){var token=localStorage.getItem('token');if(token){var user=jwt_decode(token);if(!user){localStorage.removeItem('token');}else{if(userCart.length===0||userWishlist.length===0){(function(){var _getUpdatedWishlistAndCart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var updatedUserInfo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://bookztron-server.vercel.app/api/user\",{headers:{'x-access-token':localStorage.getItem('token')}});case 2:updatedUserInfo=_context.sent;if(updatedUserInfo.data.status===\"ok\"){dispatchUserWishlist({type:\"UPDATE_USER_WISHLIST\",payload:updatedUserInfo.data.user.wishlist});dispatchUserCart({type:\"UPDATE_USER_CART\",payload:updatedUserInfo.data.user.cart});}case 4:case\"end\":return _context.stop();}}},_callee);}));function getUpdatedWishlistAndCart(){return _getUpdatedWishlistAndCart.apply(this,arguments);}return getUpdatedWishlistAndCart;})()();}}}else{dispatchUserWishlist({type:\"UPDATE_USER_WISHLIST\",payload:[]});dispatchUserCart({type:\"UPDATE_USER_CART\",payload:[]});}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-content-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[userCart.length,\" items in Cart\"]}),userCart.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-cart-message-container\",children:[/*#__PURE__*/_jsx(Lottie,{options:cartObj,height:150,width:150,isStopped:false,isPaused:false}),/*#__PURE__*/_jsx(\"h2\",{children:\"Your cart is empty \\uD83D\\uDE43\"}),/*#__PURE__*/_jsx(Link,{to:\"/shop\",children:/*#__PURE__*/_jsx(\"button\",{className:\" solid-primary-btn\",children:\"Go to shop\"})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"cart-grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-items-grid\",children:userCart.map(function(productDetails,index){return/*#__PURE__*/_jsx(HorizontalProductCard,{productDetails:productDetails},index);})}),/*#__PURE__*/_jsx(ShoppingBill,{})]})]});}export{Cart};","map":{"version":3,"sources":["C:/Users/pradh/Desktop/devrev/TheBookCrafter.com/src/Pages/Cart/Cart.jsx"],"names":["useEffect","jwt_decode","axios","Link","useWishlist","useCart","HorizontalProductCard","ShoppingBill","Lottie","CartLottie","Cart","userWishlist","dispatchUserWishlist","userCart","dispatchUserCart","cartObj","loop","autoplay","animationData","rendererSettings","preserveAspectRatio","token","localStorage","getItem","user","removeItem","length","get","headers","updatedUserInfo","data","status","type","payload","wishlist","cart","getUpdatedWishlistAndCart","map","productDetails","index"],"mappings":"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","sourcesContent":["import \"./Cart.css\"\r\nimport { useEffect } from \"react\";\r\nimport jwt_decode from \"jwt-decode\"\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\"\r\nimport { \r\n    useWishlist, \r\n    useCart, \r\n    HorizontalProductCard,\r\n    ShoppingBill \r\n} from \"../../index\"\r\nimport Lottie from 'react-lottie';\r\nimport CartLottie from \"../../Assets/Icons/cart.json\"\r\n\r\nfunction Cart()\r\n{\r\n    const { userWishlist, dispatchUserWishlist } = useWishlist()\r\n    const { userCart, dispatchUserCart } = useCart()\r\n    let cartObj = {\r\n        loop: true,\r\n        autoplay: true,\r\n        animationData : CartLottie,\r\n        rendererSettings: {\r\n          preserveAspectRatio: 'xMidYMid slice'\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const token=localStorage.getItem('token')\r\n\r\n        if(token)\r\n        {\r\n            const user = jwt_decode(token)\r\n            if(!user)\r\n            {\r\n                localStorage.removeItem('token')\r\n            }\r\n            else\r\n            {\r\n                if(userCart.length===0 || userWishlist.length===0)\r\n                {\r\n                    (async function getUpdatedWishlistAndCart()\r\n                    {\r\n                        let updatedUserInfo = await axios.get(\r\n                        \"https://bookztron-server.vercel.app/api/user\",\r\n                        {\r\n                            headers:\r\n                            {\r\n                            'x-access-token': localStorage.getItem('token'),\r\n                            }\r\n                        })\r\n\r\n                        if(updatedUserInfo.data.status===\"ok\")\r\n                        {\r\n                            dispatchUserWishlist({type: \"UPDATE_USER_WISHLIST\",payload: updatedUserInfo.data.user.wishlist})\r\n                            dispatchUserCart({type: \"UPDATE_USER_CART\",payload: updatedUserInfo.data.user.cart})\r\n                        }\r\n                    })()\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            dispatchUserWishlist({type: \"UPDATE_USER_WISHLIST\",payload: []})\r\n            dispatchUserCart({type: \"UPDATE_USER_CART\",payload: []})\r\n        }   \r\n    },[])\r\n\r\n    return (\r\n        <div className=\"cart-content-container\">\r\n            <h2>{userCart.length} items in Cart</h2>\r\n            {\r\n                userCart.length === 0\r\n                ? (\r\n                    <div className=\"empty-cart-message-container\">\r\n                            <Lottie options={cartObj}\r\n                                height={150}\r\n                                width={150}\r\n                                isStopped={false}\r\n                                isPaused={false}\r\n                            />\r\n                            <h2>Your cart is empty ðŸ™ƒ</h2>\r\n                            <Link to=\"/shop\">\r\n                                <button className=\" solid-primary-btn\">Go to shop</button>\r\n                            </Link>\r\n                    </div>\r\n                )\r\n                : (\r\n                    <div className=\"cart-grid\">\r\n                        <div className=\"cart-items-grid\">\r\n                            {\r\n                                userCart.map( (productDetails, index)=>    \r\n                                    <HorizontalProductCard key={index} productDetails={productDetails}/>\r\n                                )\r\n                            }\r\n                        </div>\r\n                        <ShoppingBill/>\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport { Cart }"]},"metadata":{},"sourceType":"module"}