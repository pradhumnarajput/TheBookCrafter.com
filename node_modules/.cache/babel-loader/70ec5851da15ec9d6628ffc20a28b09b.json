{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pradh\\\\Desktop\\\\devrev\\\\TheBookCrafter.com\\\\src\\\\Pages\\\\ProductPage\\\\ProductPage.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from \"react\";\nimport \"./ProductPage.css\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useParams } from \"react-router-dom\";\nimport { useToast, useWishlist, useCart } from \"../../index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ProductPage() {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    dispatchUserWishlist\n  } = useWishlist();\n  const {\n    dispatchUserCart\n  } = useCart();\n  const {\n    showToast\n  } = useToast();\n  const {\n    id\n  } = useParams();\n  const productDetailsOnStorage = localStorage.getItem(`${id}`);\n  const productdetails = JSON.parse(productDetailsOnStorage);\n  const {\n    _id,\n    bookName,\n    author,\n    originalPrice,\n    discountedPrice,\n    discountPercent,\n    imgSrc,\n    imgAlt,\n    badgeText,\n    outOfStock,\n    rating,\n    description\n  } = productdetails;\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      const user = jwt_decode(token);\n\n      if (!user) {\n        localStorage.removeItem('token');\n      } else {\n        (async function getUpdatedWishlistAndCart() {\n          let updatedUserInfo = await axios.get(\"https://bookztron-server.vercel.app/api/user\", {\n            headers: {\n              'x-access-token': localStorage.getItem('token')\n            }\n          });\n\n          if (updatedUserInfo.data.status === \"ok\") {\n            dispatchUserWishlist({\n              type: \"UPDATE_USER_WISHLIST\",\n              payload: updatedUserInfo.data.user.wishlist\n            });\n            dispatchUserCart({\n              type: \"UPDATE_USER_CART\",\n              payload: updatedUserInfo.data.user.cart\n            });\n          }\n        })();\n      }\n    }\n  }, []);\n\n  async function addItemToWishlist() {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      const user = jwt_decode(token);\n\n      if (!user) {\n        localStorage.removeItem('token');\n        showToast(\"warning\", \"\", \"Kindly Login\");\n        navigate('/login');\n      } else {\n        let wishlistUpdateResponse = await axios.patch(\"https://bookztron-server.vercel.app/api/wishlist\", {\n          productdetails\n        }, {\n          headers: {\n            'x-access-token': localStorage.getItem('token')\n          }\n        });\n\n        if (wishlistUpdateResponse.data.status === \"ok\") {\n          dispatchUserWishlist({\n            type: \"UPDATE_USER_WISHLIST\",\n            payload: wishlistUpdateResponse.data.user.wishlist\n          });\n          showToast(\"success\", \"\", \"Item successfully added to wishlist\");\n        }\n      }\n    } else {\n      showToast(\"warning\", \"\", \"Kindly Login\");\n    }\n  }\n\n  async function addItemToCart() {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      const user = jwt_decode(token);\n\n      if (!user) {\n        localStorage.removeItem('token');\n        showToast(\"warning\", \"\", \"Kindly Login\");\n        navigate('/login');\n      } else {\n        let cartUpdateResponse = await axios.patch(\"https://bookztron-server.vercel.app/api/cart\", {\n          productdetails\n        }, {\n          headers: {\n            'x-access-token': localStorage.getItem('token')\n          }\n        });\n\n        if (cartUpdateResponse.data.status === \"ok\") {\n          dispatchUserCart({\n            type: \"UPDATE_USER_CART\",\n            payload: cartUpdateResponse.data.user.cart\n          });\n          showToast(\"success\", \"\", \"Item successfully added to cart\");\n        }\n      }\n    } else {\n      showToast(\"warning\", \"\", \"Kindly Login\");\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-page-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-page-item\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"bookcover-image\",\n        src: imgSrc,\n        alt: imgAlt\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: bookName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Author : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 24\n          }, this), \" \\xA0\\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 54\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"item-description\",\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Description : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 53\n          }, this), \" \\xA0\\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 88\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"item-rating\",\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Rating : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 48\n          }, this), \" \\xA0\\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: rating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 78\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"item-price-details\",\n          children: [\"Rs. \", discountedPrice, \" \\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"del\", {\n            children: [\"Rs. \", originalPrice]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 90\n          }, this), \" \\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"discount-on-item\",\n            children: [\"(\", discountPercent, \"% off)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this), outOfStock === true && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"out-of-stock-text\",\n          children: \"Item is currently out of stock\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 29\n        }, this), outOfStock === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item-buttons\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"item-notify-me-btn solid-primary-btn\",\n            children: \"Notify Me\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: event => {\n              event.preventDefault();\n              addItemToWishlist();\n            },\n            className: \"solid-primary-btn\",\n            children: \"Add to wishlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              addItemToCart();\n            },\n            className: \"solid-warning-btn\",\n            children: \"Add to cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ProductPage, \"K16DioT0vlQL0xST8oACZtVA9e0=\", false, function () {\n  return [useNavigate, useWishlist, useCart, useToast, useParams];\n});\n\n_c = ProductPage;\nexport { ProductPage };\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"sources":["C:/Users/pradh/Desktop/devrev/TheBookCrafter.com/src/Pages/ProductPage/ProductPage.jsx"],"names":["useEffect","axios","jwt_decode","useNavigate","useParams","useToast","useWishlist","useCart","ProductPage","navigate","dispatchUserWishlist","dispatchUserCart","showToast","id","productDetailsOnStorage","localStorage","getItem","productdetails","JSON","parse","_id","bookName","author","originalPrice","discountedPrice","discountPercent","imgSrc","imgAlt","badgeText","outOfStock","rating","description","token","user","removeItem","getUpdatedWishlistAndCart","updatedUserInfo","get","headers","data","status","type","payload","wishlist","cart","addItemToWishlist","wishlistUpdateResponse","patch","addItemToCart","cartUpdateResponse","event","preventDefault"],"mappings":"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","sourcesContent":["import { useEffect } from \"react\";\r\nimport \"./ProductPage.css\"\r\nimport axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useToast, useWishlist, useCart } from \"../../index\"\r\n\r\nfunction ProductPage()\r\n{\r\n    const navigate = useNavigate()\r\n\r\n    const { dispatchUserWishlist } = useWishlist()\r\n    const { dispatchUserCart }     = useCart()\r\n    const { showToast } = useToast()\r\n    const { id } = useParams()\r\n    const productDetailsOnStorage = localStorage.getItem(`${id}`)\r\n    const productdetails = JSON.parse(productDetailsOnStorage)\r\n    const {\r\n        _id,\r\n        bookName,\r\n        author,\r\n        originalPrice,\r\n        discountedPrice,\r\n        discountPercent,\r\n        imgSrc, \r\n        imgAlt,\r\n        badgeText, \r\n        outOfStock,\r\n        rating, \r\n        description\r\n    } = productdetails\r\n\r\n    useEffect(()=>{\r\n        const token=localStorage.getItem('token')\r\n\r\n        if(token)\r\n        {\r\n            const user = jwt_decode(token)\r\n            if(!user)\r\n            {\r\n                localStorage.removeItem('token')\r\n            }\r\n            else\r\n            {\r\n                (async function getUpdatedWishlistAndCart()\r\n                {\r\n                    let updatedUserInfo = await axios.get(\r\n                    \"https://bookztron-server.vercel.app/api/user\",\r\n                    {\r\n                        headers:\r\n                        {\r\n                        'x-access-token': localStorage.getItem('token'),\r\n                        }\r\n                    })\r\n\r\n                    if(updatedUserInfo.data.status===\"ok\")\r\n                    {\r\n                        dispatchUserWishlist({type: \"UPDATE_USER_WISHLIST\",payload: updatedUserInfo.data.user.wishlist})\r\n                        dispatchUserCart({type: \"UPDATE_USER_CART\",payload: updatedUserInfo.data.user.cart})\r\n                    }\r\n                })()\r\n            }\r\n        }   \r\n    },[])\r\n\r\n    async function addItemToWishlist()\r\n    {\r\n        const token=localStorage.getItem('token')\r\n\r\n        if(token)\r\n        {\r\n            const user = jwt_decode(token)\r\n            \r\n            if(!user)\r\n            {\r\n                localStorage.removeItem('token')\r\n                showToast(\"warning\",\"\",\"Kindly Login\")\r\n                navigate('/login')\r\n            }\r\n            else\r\n            {\r\n                let wishlistUpdateResponse = await axios.patch(\r\n                    \"https://bookztron-server.vercel.app/api/wishlist\",\r\n                    {\r\n                        productdetails\r\n                    },\r\n                    {\r\n                        headers:\r\n                        {\r\n                            'x-access-token': localStorage.getItem('token'),\r\n                        }\r\n                    }\r\n                )\r\n        \r\n                if(wishlistUpdateResponse.data.status===\"ok\")\r\n                {\r\n                    dispatchUserWishlist({type: \"UPDATE_USER_WISHLIST\",payload: wishlistUpdateResponse.data.user.wishlist})\r\n                    showToast(\"success\",\"\",\"Item successfully added to wishlist\")\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            showToast(\"warning\",\"\",\"Kindly Login\")\r\n        } \r\n    }\r\n\r\n    async function addItemToCart()\r\n    {\r\n        const token=localStorage.getItem('token')\r\n\r\n        if(token)\r\n        {\r\n            const user = jwt_decode(token)\r\n            \r\n            if(!user)\r\n            {\r\n                localStorage.removeItem('token')\r\n                showToast(\"warning\",\"\",\"Kindly Login\")\r\n                navigate('/login')\r\n            }\r\n            else\r\n            {\r\n                let cartUpdateResponse = await axios.patch(\r\n                    \"https://bookztron-server.vercel.app/api/cart\",\r\n                    {\r\n                        productdetails\r\n                    },\r\n                    {\r\n                        headers:\r\n                        {\r\n                            'x-access-token': localStorage.getItem('token'),\r\n                        }\r\n                    }\r\n                )\r\n                if(cartUpdateResponse.data.status===\"ok\")\r\n                {\r\n                    dispatchUserCart({type: \"UPDATE_USER_CART\",payload: cartUpdateResponse.data.user.cart})\r\n                    showToast(\"success\",\"\",\"Item successfully added to cart\")\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            showToast(\"warning\",\"\",\"Kindly Login\")\r\n        } \r\n    }\r\n\r\n    return (\r\n        <div className=\"product-page-container\">\r\n            <div className=\"product-page-item\">\r\n                <img className=\"bookcover-image\" src={imgSrc} alt={imgAlt}></img>\r\n                <div className=\"item-details\">\r\n                    <h2>{bookName}</h2>\r\n                    <hr></hr>\r\n                    <p><b>Author : </b> &nbsp;&nbsp; <span>{author}</span> </p>\r\n                    <p className=\"item-description\"><b>Description : </b> &nbsp;&nbsp; <span>{description}</span> </p>\r\n                    <p className=\"item-rating\"><b>Rating : </b> &nbsp;&nbsp; <span>{rating}</span> </p>\r\n                    <h3 className=\"item-price-details\">Rs. {discountedPrice} &nbsp;&nbsp;<del>Rs. {originalPrice}</del> &nbsp;&nbsp;\r\n                        <span className=\"discount-on-item\">({discountPercent}% off)</span>\r\n                    </h3>\r\n                    {\r\n                        outOfStock === true && (\r\n                            <p className=\"out-of-stock-text\">Item is currently out of stock</p>\r\n                        )\r\n                    }\r\n                    {\r\n                        outOfStock === true \r\n                        ? (\r\n                            <div className=\"item-buttons\">\r\n                                <button className=\"item-notify-me-btn solid-primary-btn\">Notify Me</button>\r\n                            </div>\r\n                        )\r\n                        : (\r\n                            <div className=\"item-buttons\">\r\n                                <button\r\n                                    onClick={(event)=>{\r\n                                        event.preventDefault();\r\n                                        addItemToWishlist()\r\n                                    }}  \r\n                                    className=\"solid-primary-btn\">\r\n                                        Add to wishlist\r\n                                </button>\r\n                                <button \r\n                                    onClick={()=>{\r\n                                        addItemToCart()\r\n                                    }}\r\n                                    className=\"solid-warning-btn\">\r\n                                        Add to cart\r\n                                </button>\r\n                            </div>\r\n                        )\r\n                    }\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport { ProductPage }"]},"metadata":{},"sourceType":"module"}