{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/pradh/Desktop/devrev/Bookztron-E-Commerce_Book_Store/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pradh\\\\Desktop\\\\devrev\\\\Bookztron-E-Commerce_Book_Store\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import\"./Wishlist.css\";import jwt_decode from\"jwt-decode\";import axios from\"axios\";import{Link,useNavigate}from\"react-router-dom\";import\"../../Context/wishlist-context\";import{WishlistProductCard,useWishlist,useCart}from\"../../index\";import Lottie from'react-lottie';import HeartLottie from\"../../Assets/Icons/heart.json\";import{useEffect}from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Wishlist(){var _useWishlist=useWishlist(),userWishlist=_useWishlist.userWishlist,dispatchUserWishlist=_useWishlist.dispatchUserWishlist;var _useCart=useCart(),dispatchUserCart=_useCart.dispatchUserCart;var heartObj={loop:true,autoplay:true,animationData:HeartLottie,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}};useEffect(function(){var token=localStorage.getItem('token');if(token){var user=jwt_decode(token);if(!user){localStorage.removeItem('token');}else{(function(){var _getUpdatedWishlistAndCart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var updatedUserInfo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://bookztron-server.vercel.app/api/user\",{headers:{'x-access-token':localStorage.getItem('token')}});case 2:updatedUserInfo=_context.sent;if(updatedUserInfo.data.status===\"ok\"){dispatchUserWishlist({type:\"UPDATE_USER_WISHLIST\",payload:updatedUserInfo.data.user.wishlist});dispatchUserCart({type:\"UPDATE_USER_CART\",payload:updatedUserInfo.data.user.cart});}case 4:case\"end\":return _context.stop();}}},_callee);}));function getUpdatedWishlistAndCart(){return _getUpdatedWishlistAndCart.apply(this,arguments);}return getUpdatedWishlistAndCart;})()();}}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"wishlist-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[userWishlist.length,\" \",userWishlist.length===1?\"item\":\"items\",\" in Wishlist\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"products-card-grid\",children:JSON.stringify(userWishlist)!==JSON.stringify([])?userWishlist.map(function(productdetails){return/*#__PURE__*/_jsx(WishlistProductCard,{productdetails:productdetails},productdetails._id);}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-wishlist-message-container\",children:[/*#__PURE__*/_jsx(Lottie,{options:heartObj,height:150,width:150,isStopped:false,isPaused:false}),/*#__PURE__*/_jsx(\"h2\",{children:\"Your wishlist is empty \\uD83D\\uDE43\"}),/*#__PURE__*/_jsx(Link,{to:\"/shop\",children:/*#__PURE__*/_jsx(\"button\",{className:\" solid-primary-btn\",children:\"Go to shop\"})})]})})]});}export{Wishlist};","map":{"version":3,"sources":["C:/Users/pradh/Desktop/devrev/Bookztron-E-Commerce_Book_Store/src/Pages/Wishlist/Wishlist.jsx"],"names":["jwt_decode","axios","Link","useNavigate","WishlistProductCard","useWishlist","useCart","Lottie","HeartLottie","useEffect","Wishlist","userWishlist","dispatchUserWishlist","dispatchUserCart","heartObj","loop","autoplay","animationData","rendererSettings","preserveAspectRatio","token","localStorage","getItem","user","removeItem","get","headers","updatedUserInfo","data","status","type","payload","wishlist","cart","getUpdatedWishlistAndCart","length","JSON","stringify","map","productdetails","_id"],"mappings":"mTAAA,MAAO,gBAAP,CACA,MAAOA,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,MAAiB,gCAAjB,CACA,OACIC,mBADJ,CAEIC,WAFJ,CAGIC,OAHJ,KAIO,aAJP,CAKA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,OAASC,SAAT,KAA0B,OAA1B,C,wFAEA,QAASC,CAAAA,QAAT,EACA,CACI,iBAA+CL,WAAW,EAA1D,CAAQM,YAAR,cAAQA,YAAR,CAAsBC,oBAAtB,cAAsBA,oBAAtB,CACA,aAA6BN,OAAO,EAApC,CAAQO,gBAAR,UAAQA,gBAAR,CAEA,GAAIC,CAAAA,QAAQ,CAAG,CACXC,IAAI,CAAE,IADK,CAEXC,QAAQ,CAAE,IAFC,CAGXC,aAAa,CAAGT,WAHL,CAIXU,gBAAgB,CAAE,CAChBC,mBAAmB,CAAE,gBADL,CAJP,CAAf,CASAV,SAAS,CAAC,UAAI,CACV,GAAMW,CAAAA,KAAK,CAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CAEA,GAAGF,KAAH,CACA,CACI,GAAMG,CAAAA,IAAI,CAAGvB,UAAU,CAACoB,KAAD,CAAvB,CACA,GAAG,CAACG,IAAJ,CACA,CACIF,YAAY,CAACG,UAAb,CAAwB,OAAxB,EACH,CAHD,IAKA,CACI,mGAAC,6KAE+BvB,CAAAA,KAAK,CAACwB,GAAN,CAC5B,8CAD4B,CAE5B,CACIC,OAAO,CACP,CACA,iBAAkBL,YAAY,CAACC,OAAb,CAAqB,OAArB,CADlB,CAFJ,CAF4B,CAF/B,QAEOK,eAFP,eAWG,GAAGA,eAAe,CAACC,IAAhB,CAAqBC,MAArB,GAA8B,IAAjC,CACA,CACIjB,oBAAoB,CAAC,CAACkB,IAAI,CAAE,sBAAP,CAA8BC,OAAO,CAAEJ,eAAe,CAACC,IAAhB,CAAqBL,IAArB,CAA0BS,QAAjE,CAAD,CAApB,CACAnB,gBAAgB,CAAC,CAACiB,IAAI,CAAE,kBAAP,CAA0BC,OAAO,CAAEJ,eAAe,CAACC,IAAhB,CAAqBL,IAArB,CAA0BU,IAA7D,CAAD,CAAhB,CACH,CAfJ,sDAAD,WAAgBC,CAAAA,yBAAhB,kEAAgBA,CAAAA,yBAAhB,QAiBH,CACJ,CACJ,CA/BQ,CA+BP,EA/BO,CAAT,CAiCA,mBACI,aAAK,SAAS,CAAC,oBAAf,wBACI,sBAAKvB,YAAY,CAACwB,MAAlB,KAA2BxB,YAAY,CAACwB,MAAb,GAAsB,CAAtB,CAAwB,MAAxB,CAA+B,OAA1D,kBADJ,cAEI,YAAK,SAAS,CAAC,oBAAf,UAEQC,IAAI,CAACC,SAAL,CAAe1B,YAAf,IAA+ByB,IAAI,CAACC,SAAL,CAAe,EAAf,CAA/B,CAEI1B,YAAY,CAAC2B,GAAb,CAAiB,SAAAC,cAAc,qBAC3B,KAAC,mBAAD,EAA8C,cAAc,CAAEA,cAA9D,EAA0BA,cAAc,CAACC,GAAzC,CAD2B,EAA/B,CAFJ,cAOI,aAAK,SAAS,CAAC,kCAAf,wBACI,KAAC,MAAD,EAAQ,OAAO,CAAE1B,QAAjB,CACI,MAAM,CAAE,GADZ,CAEI,KAAK,CAAE,GAFX,CAGI,SAAS,CAAE,KAHf,CAII,QAAQ,CAAE,KAJd,EADJ,cAOI,2DAPJ,cAQI,KAAC,IAAD,EAAM,EAAE,CAAC,OAAT,uBACI,eAAQ,SAAS,CAAC,oBAAlB,wBADJ,EARJ,GATZ,EAFJ,GADJ,CA6BH,CAED,OAASJ,QAAT","sourcesContent":["import \"./Wishlist.css\"\r\nimport jwt_decode from \"jwt-decode\";\r\nimport axios from \"axios\"\r\nimport { Link, useNavigate } from \"react-router-dom\"\r\nimport {  } from \"../../Context/wishlist-context\"\r\nimport { \r\n    WishlistProductCard,\r\n    useWishlist,\r\n    useCart \r\n} from \"../../index\"\r\nimport Lottie from 'react-lottie';\r\nimport HeartLottie from \"../../Assets/Icons/heart.json\"\r\nimport { useEffect } from \"react\";\r\n\r\nfunction Wishlist()\r\n{\r\n    const { userWishlist, dispatchUserWishlist } = useWishlist()\r\n    const { dispatchUserCart } = useCart()\r\n\r\n    let heartObj = {\r\n        loop: true,\r\n        autoplay: true,\r\n        animationData : HeartLottie,\r\n        rendererSettings: {\r\n          preserveAspectRatio: 'xMidYMid slice'\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const token=localStorage.getItem('token')\r\n\r\n        if(token)\r\n        {\r\n            const user = jwt_decode(token)\r\n            if(!user)\r\n            {\r\n                localStorage.removeItem('token')\r\n            }\r\n            else\r\n            {\r\n                (async function getUpdatedWishlistAndCart()\r\n                {\r\n                    let updatedUserInfo = await axios.get(\r\n                    \"https://bookztron-server.vercel.app/api/user\",\r\n                    {\r\n                        headers:\r\n                        {\r\n                        'x-access-token': localStorage.getItem('token'),\r\n                        }\r\n                    })\r\n\r\n                    if(updatedUserInfo.data.status===\"ok\")\r\n                    {\r\n                        dispatchUserWishlist({type: \"UPDATE_USER_WISHLIST\",payload: updatedUserInfo.data.user.wishlist})\r\n                        dispatchUserCart({type: \"UPDATE_USER_CART\",payload: updatedUserInfo.data.user.cart})\r\n                    }\r\n                })()\r\n            }\r\n        }   \r\n    },[])\r\n\r\n    return (\r\n        <div className=\"wishlist-container\">\r\n            <h2>{userWishlist.length} {userWishlist.length===1?\"item\":\"items\"} in Wishlist</h2>\r\n            <div className=\"products-card-grid\">\r\n                {\r\n                    JSON.stringify(userWishlist)!==JSON.stringify([]) \r\n                    ? (\r\n                        userWishlist.map(productdetails => (\r\n                            <WishlistProductCard key={productdetails._id} productdetails={productdetails} />\r\n                        ))\r\n                    )\r\n                    : (\r\n                        <div className=\"empty-wishlist-message-container\">\r\n                            <Lottie options={heartObj}\r\n                                height={150}\r\n                                width={150}\r\n                                isStopped={false}\r\n                                isPaused={false}\r\n                            />\r\n                            <h2>Your wishlist is empty ðŸ™ƒ</h2>\r\n                            <Link to=\"/shop\">\r\n                                <button className=\" solid-primary-btn\">Go to shop</button>\r\n                            </Link>\r\n                        </div>\r\n                    )\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport { Wishlist }"]},"metadata":{},"sourceType":"module"}