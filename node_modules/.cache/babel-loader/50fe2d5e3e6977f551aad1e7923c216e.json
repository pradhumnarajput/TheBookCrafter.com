{"ast":null,"code":"import React,{useEffect}from'react';import'./Navbar.css';import{Link,useLocation}from\"react-router-dom\";import jwt_decode from\"jwt-decode\";import{useUserLogin,useToast,useWishlist,useCart,useOrders,useSearchBar}from\"../../index\";import{BsShopWindow,BsFillBagFill}from\"react-icons/bs\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Navbar(){var _useWishlist=useWishlist(),userWishlist=_useWishlist.userWishlist,dispatchUserWishlist=_useWishlist.dispatchUserWishlist;var _useCart=useCart(),userCart=_useCart.userCart,dispatchUserCart=_useCart.dispatchUserCart;var _useOrders=useOrders(),userOrders=_useOrders.userOrders,dispatchUserOrders=_useOrders.dispatchUserOrders;var _useUserLogin=useUserLogin(false),setUserLoggedIn=_useUserLogin.setUserLoggedIn;var _useToast=useToast(),showToast=_useToast.showToast;var location=useLocation();var _useSearchBar=useSearchBar(),searchBarTerm=_useSearchBar.searchBarTerm,setSearchBarTerm=_useSearchBar.setSearchBarTerm;useEffect(function(){var token=localStorage.getItem('token');if(token){var user=jwt_decode(token);if(!user){localStorage.removeItem('token');setUserLoggedIn(false);}else{setUserLoggedIn(true);}}},[]);useEffect(function(){function handleInvalidToken(){if(localStorage.getItem('token')!==null){setUserLoggedIn(true);}else{setUserLoggedIn(false);dispatchUserWishlist({type:\"UPDATE_USER_WISHLIST\",payload:[]});dispatchUserCart({type:\"UPDATE_USER_CART\",payload:[]});dispatchUserOrders({type:\"UPDATE_USER_ORDERS\",payload:[]});}}window.addEventListener(\"storage\",handleInvalidToken);return function cleanup(){window.removeEventListener('storage',handleInvalidToken);};},[userWishlist,userCart]);function logoutUser(){localStorage.removeItem('token');dispatchUserWishlist({type:\"UPDATE_USER_WISHLIST\",payload:[]});dispatchUserCart({type:\"UPDATE_USER_CART\",payload:[]});dispatchUserOrders({type:\"UPDATE_USER_ORDERS\",payload:[]});setUserLoggedIn(false);localStorage.clear();showToast(\"success\",\"\",\"Logged out successfully\");}return/*#__PURE__*/_jsxs(\"div\",{className:\"top-bar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-topbar-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"top-bar-brand-name\",children:\"TheBookCrafter.com\"})}),location.pathname===\"/shop\"&&/*#__PURE__*/_jsx(\"div\",{className:\"search-bar\",children:/*#__PURE__*/_jsx(\"input\",{className:\"search-bar-input\",placeholder:\"Search\",value:searchBarTerm,onChange:function onChange(event){return setSearchBarTerm(event.target.value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-topbar-container\",children:[localStorage.getItem('token')!==null?/*#__PURE__*/_jsx(\"button\",{onClick:logoutUser,className:\"navbar-login-btn solid-primary-btn\",children:\"Logout\"}):/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"navbar-login-btn solid-primary-btn\",children:\"Login\"})}),/*#__PURE__*/_jsx(Link,{to:\"/shop\",children:/*#__PURE__*/_jsx(\"button\",{className:\"icon-btn\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BsShopWindow,{})})})}),/*#__PURE__*/_jsx(Link,{to:\"/wishlist\",children:/*#__PURE__*/_jsx(\"button\",{className:\"icon-btn\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"icon-count-badge\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-heart-o fa-x\",\"aria-hidden\":\"true\"}),userWishlist.length!==0&&/*#__PURE__*/_jsx(\"span\",{className:\"count-badge-x\",children:userWishlist.length})]})})}),/*#__PURE__*/_jsx(Link,{to:\"/cart\",children:/*#__PURE__*/_jsx(\"button\",{className:\"icon-btn\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"icon-count-badge\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-shopping-cart fa-x\",\"aria-hidden\":\"true\"}),userCart.length!==0&&/*#__PURE__*/_jsx(\"span\",{className:\"count-badge-x\",children:userCart.length})]})})}),/*#__PURE__*/_jsx(Link,{to:\"/orders\",children:/*#__PURE__*/_jsx(\"button\",{className:\"icon-btn\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"icon-count-badge\",children:[/*#__PURE__*/_jsx(BsFillBagFill,{style:{marginBottom:\"4px\"}}),userOrders.length!==0&&/*#__PURE__*/_jsx(\"span\",{className:\"count-badge-x\",children:userOrders.length})]})})})]})]});}export{Navbar};","map":{"version":3,"sources":["C:/Users/pradh/Desktop/devrev/TheBookCrafter.com/src/Components/Navbar/Navbar.js"],"names":["React","useEffect","Link","useLocation","jwt_decode","useUserLogin","useToast","useWishlist","useCart","useOrders","useSearchBar","BsShopWindow","BsFillBagFill","Navbar","userWishlist","dispatchUserWishlist","userCart","dispatchUserCart","userOrders","dispatchUserOrders","setUserLoggedIn","showToast","location","searchBarTerm","setSearchBarTerm","token","localStorage","getItem","user","removeItem","handleInvalidToken","type","payload","window","addEventListener","cleanup","removeEventListener","logoutUser","clear","pathname","event","target","value","length","marginBottom"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\nimport './Navbar.css'\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { useUserLogin, useToast, useWishlist, useCart, useOrders, useSearchBar } from \"../../index\"\r\nimport { BsShopWindow, BsFillBagFill } from \"react-icons/bs\"\r\n\r\nfunction Navbar() {\r\n\r\n    const { userWishlist, dispatchUserWishlist } = useWishlist()\r\n    const { userCart, dispatchUserCart } = useCart()\r\n    const { userOrders, dispatchUserOrders } = useOrders()\r\n    const { setUserLoggedIn } = useUserLogin(false)\r\n    const { showToast } = useToast()\r\n    const location = useLocation()\r\n    const { searchBarTerm, setSearchBarTerm } = useSearchBar()\r\n\r\n    useEffect(()=>{\r\n        const token=localStorage.getItem('token')\r\n        if(token)\r\n        {\r\n            const user = jwt_decode(token)\r\n            \r\n            if(!user)\r\n            {\r\n                localStorage.removeItem('token')\r\n                setUserLoggedIn(false)\r\n            }\r\n            else\r\n            {\r\n                setUserLoggedIn(true)\r\n            }\r\n        }\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n        function handleInvalidToken() {\r\n            if(localStorage.getItem('token')!==null)\r\n            {\r\n                setUserLoggedIn(true)\r\n            }\r\n            else\r\n            {\r\n                setUserLoggedIn(false)\r\n                dispatchUserWishlist({type:\"UPDATE_USER_WISHLIST\",payload:[]})\r\n                dispatchUserCart({type:\"UPDATE_USER_CART\",payload:[]})\r\n                dispatchUserOrders({type:\"UPDATE_USER_ORDERS\",payload:[]})\r\n            }\r\n        }\r\n        window.addEventListener(\"storage\",handleInvalidToken)\r\n\r\n        return function cleanup() {\r\n            window.removeEventListener('storage', handleInvalidToken)\r\n        }\r\n    },[userWishlist,userCart])\r\n\r\n    function logoutUser()\r\n    {\r\n        localStorage.removeItem('token')\r\n        dispatchUserWishlist({type:\"UPDATE_USER_WISHLIST\",payload:[]})\r\n        dispatchUserCart({type:\"UPDATE_USER_CART\",payload:[]})\r\n        dispatchUserOrders({type:\"UPDATE_USER_ORDERS\",payload:[]})\r\n        setUserLoggedIn(false)\r\n        localStorage.clear()\r\n        showToast(\"success\",\"\",\"Logged out successfully\")\r\n    }\r\n    \r\n    return (\r\n        <div className=\"top-bar\">\r\n            <div className=\"left-topbar-container\">\r\n                {/* <button id=\"top-bar-ham-menu-btn\" className=\"icon-btn\"><i className=\"fa fa-bars\" aria-hidden=\"true\"></i></button> */}\r\n                <Link to=\"/\">\r\n                    <h2 className=\"top-bar-brand-name\">TheBookCrafter.com</h2>\r\n                </Link>\r\n                {\r\n                    location.pathname===\"/shop\" && \r\n                    (\r\n                        <div className=\"search-bar\">\r\n                            <input \r\n                                className=\"search-bar-input\" \r\n                                placeholder=\"Search\"\r\n                                value={searchBarTerm}\r\n                                onChange={event=>setSearchBarTerm(event.target.value)}\r\n                            />\r\n                        </div>\r\n                    )\r\n                }\r\n            </div>\r\n            <div className=\"right-topbar-container\">\r\n                {\r\n                    localStorage.getItem('token')!==null\r\n                    ? (\r\n                        <button onClick={logoutUser} className=\"navbar-login-btn solid-primary-btn\">Logout</button>\r\n                    )\r\n                    : (\r\n                        <Link to=\"/login\">\r\n                            <button className=\"navbar-login-btn solid-primary-btn\">Login</button>\r\n                        </Link>\r\n                    )\r\n                }\r\n                <Link to=\"/shop\">\r\n                    <button className=\"icon-btn\">\r\n                        <div>\r\n                            <BsShopWindow/>\r\n                        </div>\r\n                    </button>\r\n                </Link>\r\n                <Link to=\"/wishlist\">\r\n                    <button className=\"icon-btn\">\r\n                        <div className=\"icon-count-badge\">\r\n                            <i className=\"fa fa-heart-o fa-x\" aria-hidden=\"true\" ></i>\r\n                            {\r\n                                userWishlist.length!==0\r\n                                && (<span className=\"count-badge-x\">{userWishlist.length}</span>)\r\n                            }\r\n                        </div>\r\n                    </button>\r\n                </Link>\r\n                <Link to=\"/cart\">\r\n                    <button className=\"icon-btn\">\r\n                        <div className=\"icon-count-badge\">\r\n                            <i className=\"fa fa-shopping-cart fa-x\" aria-hidden=\"true\" ></i>\r\n                            {\r\n                                userCart.length!==0\r\n                                && (<span className=\"count-badge-x\">{userCart.length}</span>)\r\n                            }\r\n                        </div>\r\n                    </button>\r\n                </Link>\r\n                <Link to=\"/orders\">\r\n                    <button className=\"icon-btn\">\r\n                        <div className=\"icon-count-badge\">\r\n                        <BsFillBagFill \r\n                            style={{\r\n                                marginBottom:\"4px\"\r\n                            }}\r\n                        />\r\n                        {\r\n                            userOrders.length!==0\r\n                            && (<span className=\"count-badge-x\">{userOrders.length}</span>)\r\n                        }\r\n                        </div>\r\n                    </button>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport {Navbar};"]},"metadata":{},"sourceType":"module"}