{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/pradh/Desktop/devrev/Bookztron-E-Commerce_Book_Store/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pradh\\\\Desktop\\\\devrev\\\\Bookztron-E-Commerce_Book_Store\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import\"./Orders.css\";import{useEffect}from\"react\";import jwt_decode from\"jwt-decode\";import axios from\"axios\";import{Link,useLocation}from\"react-router-dom\";import{ProductOrderCard,useWishlist,useCart,useOrders}from\"../../index\";import Lottie from'react-lottie';import GuyWithBookLottie from\"../../Assets/Icons/guy_with_book.json\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Orders(){var _useWishlist=useWishlist(),userWishlist=_useWishlist.userWishlist,dispatchUserWishlist=_useWishlist.dispatchUserWishlist;var _useCart=useCart(),userCart=_useCart.userCart,dispatchUserCart=_useCart.dispatchUserCart;var _useOrders=useOrders(),userOrders=_useOrders.userOrders,dispatchUserOrders=_useOrders.dispatchUserOrders;var guyWithBookObj={loop:true,autoplay:true,animationData:GuyWithBookLottie,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}};var _useLocation=useLocation(),pathname=_useLocation.pathname;useEffect(function(){window.scrollTo(0,0);},[pathname]);useEffect(function(){var token=localStorage.getItem('token');if(token){var user=jwt_decode(token);if(!user){localStorage.removeItem('token');}else{if(userOrders.length===0){(function(){var _getUpdatedWishlistAndCart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var updatedUserInfo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://bookztron-server.vercel.app/api/user\",{headers:{'x-access-token':localStorage.getItem('token')}});case 2:updatedUserInfo=_context.sent;if(updatedUserInfo.data.status===\"ok\"){dispatchUserOrders({type:\"UPDATE_USER_ORDERS\",payload:updatedUserInfo.data.user.orders});if(userWishlist.length===0){dispatchUserWishlist({type:\"UPDATE_USER_WISHLIST\",payload:updatedUserInfo.data.user.wishlist});}if(userCart.length===0){dispatchUserCart({type:\"UPDATE_USER_CART\",payload:updatedUserInfo.data.user.cart});}}case 4:case\"end\":return _context.stop();}}},_callee);}));function getUpdatedWishlistAndCart(){return _getUpdatedWishlistAndCart.apply(this,arguments);}return getUpdatedWishlistAndCart;})()();}}}else{dispatchUserOrders({type:\"UPDATE_USER_ORDERS\",payload:[]});}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"orders-content-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[userOrders.length,\" \",userOrders===1?\"item\":\"items\",\" in your Orders\"]}),userOrders.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-orders-message-container\",children:[/*#__PURE__*/_jsx(Lottie,{options:guyWithBookObj,height:350,width:350,isStopped:false,isPaused:false}),/*#__PURE__*/_jsx(\"h2\",{children:\"You have not placed any orders\"}),/*#__PURE__*/_jsx(Link,{to:\"/cart\",children:/*#__PURE__*/_jsx(\"button\",{className:\" solid-primary-btn\",children:\"Go to cart\"})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"orders-container\",children:userOrders.map(function(productDetails,index){return/*#__PURE__*/_jsx(ProductOrderCard,{productDetails:productDetails},index);})})]});}export{Orders};","map":{"version":3,"sources":["C:/Users/pradh/Desktop/devrev/Bookztron-E-Commerce_Book_Store/src/Pages/Orders/Orders.jsx"],"names":["useEffect","jwt_decode","axios","Link","useLocation","ProductOrderCard","useWishlist","useCart","useOrders","Lottie","GuyWithBookLottie","Orders","userWishlist","dispatchUserWishlist","userCart","dispatchUserCart","userOrders","dispatchUserOrders","guyWithBookObj","loop","autoplay","animationData","rendererSettings","preserveAspectRatio","pathname","window","scrollTo","token","localStorage","getItem","user","removeItem","length","get","headers","updatedUserInfo","data","status","type","payload","orders","wishlist","cart","getUpdatedWishlistAndCart","map","productDetails","index"],"mappings":"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","sourcesContent":["import \"./Orders.css\"\r\nimport { useEffect } from \"react\";\r\nimport jwt_decode from \"jwt-decode\"\r\nimport axios from \"axios\";\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport { \r\n    ProductOrderCard,\r\n    useWishlist,\r\n    useCart,\r\n    useOrders\r\n} from \"../../index\"\r\nimport Lottie from 'react-lottie';\r\nimport GuyWithBookLottie from \"../../Assets/Icons/guy_with_book.json\"\r\n\r\nfunction Orders()\r\n{\r\n    const { userWishlist, dispatchUserWishlist } = useWishlist()\r\n    const { userCart, dispatchUserCart } = useCart()\r\n    const { userOrders, dispatchUserOrders } = useOrders()\r\n    let guyWithBookObj = {\r\n        loop: true,\r\n        autoplay: true,\r\n        animationData : GuyWithBookLottie,\r\n        rendererSettings: {\r\n          preserveAspectRatio: 'xMidYMid slice'\r\n        }\r\n    }\r\n    const { pathname } = useLocation();\r\n  \r\n    useEffect(() => {\r\n      window.scrollTo(0, 0);\r\n    }, [pathname]);\r\n\r\n    useEffect(()=>{\r\n        const token=localStorage.getItem('token')\r\n\r\n        if(token)\r\n        {\r\n            const user = jwt_decode(token)\r\n            if(!user)\r\n            {\r\n                localStorage.removeItem('token')\r\n            }\r\n            else\r\n            {\r\n                if(userOrders.length===0)\r\n                {\r\n                    (async function getUpdatedWishlistAndCart()\r\n                    {\r\n                        let updatedUserInfo = await axios.get(\r\n                        \"https://bookztron-server.vercel.app/api/user\",\r\n                        {\r\n                            headers:\r\n                            {\r\n                            'x-access-token': localStorage.getItem('token'),\r\n                            }\r\n                        })\r\n                        if(updatedUserInfo.data.status===\"ok\")\r\n                        {\r\n                            dispatchUserOrders({type: \"UPDATE_USER_ORDERS\",payload: updatedUserInfo.data.user.orders})                   \r\n                            if(userWishlist.length===0)\r\n                            {\r\n                                dispatchUserWishlist({type: \"UPDATE_USER_WISHLIST\",payload: updatedUserInfo.data.user.wishlist})\r\n                                \r\n                            }\r\n                            if(userCart.length===0)\r\n                            {\r\n                                dispatchUserCart({type: \"UPDATE_USER_CART\",payload: updatedUserInfo.data.user.cart})\r\n                            }\r\n                        }\r\n                    })()\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            dispatchUserOrders({type: \"UPDATE_USER_ORDERS\",payload: []})\r\n        }   \r\n    },[])\r\n\r\n    return (\r\n        <div className=\"orders-content-container\">\r\n            <h2>{userOrders.length} {userOrders===1?\"item\":\"items\"} in your Orders</h2>\r\n            {\r\n                userOrders.length === 0\r\n                ? (\r\n                    <div className=\"no-orders-message-container\">\r\n                            <Lottie options={guyWithBookObj}\r\n                                height={350}\r\n                                width={350}\r\n                                isStopped={false}\r\n                                isPaused={false}\r\n                            />\r\n                            <h2>You have not placed any orders</h2>\r\n                            <Link to=\"/cart\">\r\n                                <button className=\" solid-primary-btn\">Go to cart</button>\r\n                            </Link>\r\n                    </div>\r\n                )\r\n                : (\r\n                    <div className=\"orders-container\">\r\n                        {\r\n                            userOrders.map( (productDetails, index)=>    \r\n                                <ProductOrderCard key={index} productDetails={productDetails}/>\r\n                            )\r\n                        }\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport { Orders }"]},"metadata":{},"sourceType":"module"}