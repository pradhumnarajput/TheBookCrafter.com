{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pradh\\\\Desktop\\\\devrev\\\\Bookztron-E-Commerce_Book_Store\\\\src\\\\Pages\\\\Cart\\\\Cart.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./Cart.css\";\nimport { useEffect } from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { useWishlist, useCart, HorizontalProductCard, ShoppingBill } from \"../../index\";\nimport Lottie from 'react-lottie';\nimport CartLottie from \"../../Assets/Icons/cart.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Cart() {\n  _s();\n\n  const {\n    userWishlist,\n    dispatchUserWishlist\n  } = useWishlist();\n  const {\n    userCart,\n    dispatchUserCart\n  } = useCart();\n  let cartObj = {\n    loop: true,\n    autoplay: true,\n    animationData: CartLottie,\n    rendererSettings: {\n      preserveAspectRatio: 'xMidYMid slice'\n    }\n  };\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      const user = jwt_decode(token);\n\n      if (!user) {\n        localStorage.removeItem('token');\n      } else {\n        if (userCart.length === 0 || userWishlist.length === 0) {\n          (async function getUpdatedWishlistAndCart() {\n            let updatedUserInfo = await axios.get(\"https://bookztron-server.vercel.app/api/user\", {\n              headers: {\n                'x-access-token': localStorage.getItem('token')\n              }\n            });\n\n            if (updatedUserInfo.data.status === \"ok\") {\n              dispatchUserWishlist({\n                type: \"UPDATE_USER_WISHLIST\",\n                payload: updatedUserInfo.data.user.wishlist\n              });\n              dispatchUserCart({\n                type: \"UPDATE_USER_CART\",\n                payload: updatedUserInfo.data.user.cart\n              });\n            }\n          })();\n        }\n      }\n    } else {\n      dispatchUserWishlist({\n        type: \"UPDATE_USER_WISHLIST\",\n        payload: []\n      });\n      dispatchUserCart({\n        type: \"UPDATE_USER_CART\",\n        payload: []\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-content-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [userCart.length, \" items in Cart\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), userCart.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-cart-message-container\",\n      children: [/*#__PURE__*/_jsxDEV(Lottie, {\n        options: cartObj,\n        height: 150,\n        width: 150,\n        isStopped: false,\n        isPaused: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Your cart is empty \\uD83D\\uDE43\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/shop\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \" solid-primary-btn\",\n          children: \"Go to shop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-items-grid\",\n        children: userCart.map((productDetails, index) => /*#__PURE__*/_jsxDEV(HorizontalProductCard, {\n          productDetails: productDetails\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 37\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(ShoppingBill, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Cart, \"vZ0t9TAP7bHUFOuQCgZbCeM5R0k=\", false, function () {\n  return [useWishlist, useCart];\n});\n\n_c = Cart;\nexport { Cart };\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["C:/Users/pradh/Desktop/devrev/Bookztron-E-Commerce_Book_Store/src/Pages/Cart/Cart.jsx"],"names":["useEffect","jwt_decode","axios","Link","useWishlist","useCart","HorizontalProductCard","ShoppingBill","Lottie","CartLottie","Cart","userWishlist","dispatchUserWishlist","userCart","dispatchUserCart","cartObj","loop","autoplay","animationData","rendererSettings","preserveAspectRatio","token","localStorage","getItem","user","removeItem","length","getUpdatedWishlistAndCart","updatedUserInfo","get","headers","data","status","type","payload","wishlist","cart","map","productDetails","index"],"mappings":";;;AAAA,OAAO,YAAP;AACA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SACIC,WADJ,EAEIC,OAFJ,EAGIC,qBAHJ,EAIIC,YAJJ,QAKO,aALP;AAMA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;;;AAEA,SAASC,IAAT,GACA;AAAA;;AACI,QAAM;AAAEC,IAAAA,YAAF;AAAgBC,IAAAA;AAAhB,MAAyCR,WAAW,EAA1D;AACA,QAAM;AAAES,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAAiCT,OAAO,EAA9C;AACA,MAAIU,OAAO,GAAG;AACVC,IAAAA,IAAI,EAAE,IADI;AAEVC,IAAAA,QAAQ,EAAE,IAFA;AAGVC,IAAAA,aAAa,EAAGT,UAHN;AAIVU,IAAAA,gBAAgB,EAAE;AAChBC,MAAAA,mBAAmB,EAAE;AADL;AAJR,GAAd;AASApB,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMqB,KAAK,GAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AAEA,QAAGF,KAAH,EACA;AACI,YAAMG,IAAI,GAAGvB,UAAU,CAACoB,KAAD,CAAvB;;AACA,UAAG,CAACG,IAAJ,EACA;AACIF,QAAAA,YAAY,CAACG,UAAb,CAAwB,OAAxB;AACH,OAHD,MAKA;AACI,YAAGZ,QAAQ,CAACa,MAAT,KAAkB,CAAlB,IAAuBf,YAAY,CAACe,MAAb,KAAsB,CAAhD,EACA;AACI,WAAC,eAAeC,yBAAf,GACD;AACI,gBAAIC,eAAe,GAAG,MAAM1B,KAAK,CAAC2B,GAAN,CAC5B,8CAD4B,EAE5B;AACIC,cAAAA,OAAO,EACP;AACA,kCAAkBR,YAAY,CAACC,OAAb,CAAqB,OAArB;AADlB;AAFJ,aAF4B,CAA5B;;AASA,gBAAGK,eAAe,CAACG,IAAhB,CAAqBC,MAArB,KAA8B,IAAjC,EACA;AACIpB,cAAAA,oBAAoB,CAAC;AAACqB,gBAAAA,IAAI,EAAE,sBAAP;AAA8BC,gBAAAA,OAAO,EAAEN,eAAe,CAACG,IAAhB,CAAqBP,IAArB,CAA0BW;AAAjE,eAAD,CAApB;AACArB,cAAAA,gBAAgB,CAAC;AAACmB,gBAAAA,IAAI,EAAE,kBAAP;AAA0BC,gBAAAA,OAAO,EAAEN,eAAe,CAACG,IAAhB,CAAqBP,IAArB,CAA0BY;AAA7D,eAAD,CAAhB;AACH;AACJ,WAhBD;AAiBH;AACJ;AACJ,KA9BD,MAgCA;AACIxB,MAAAA,oBAAoB,CAAC;AAACqB,QAAAA,IAAI,EAAE,sBAAP;AAA8BC,QAAAA,OAAO,EAAE;AAAvC,OAAD,CAApB;AACApB,MAAAA,gBAAgB,CAAC;AAACmB,QAAAA,IAAI,EAAE,kBAAP;AAA0BC,QAAAA,OAAO,EAAE;AAAnC,OAAD,CAAhB;AACH;AACJ,GAvCQ,EAuCP,EAvCO,CAAT;AAyCA,sBACI;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAA,4BACI;AAAA,iBAAKrB,QAAQ,CAACa,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,EAGQb,QAAQ,CAACa,MAAT,KAAoB,CAApB,gBAEI;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA,8BACQ,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAEX,OAAjB;AACI,QAAA,MAAM,EAAE,GADZ;AAEI,QAAA,KAAK,EAAE,GAFX;AAGI,QAAA,SAAS,EAAE,KAHf;AAII,QAAA,QAAQ,EAAE;AAJd;AAAA;AAAA;AAAA;AAAA,cADR,eAOQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPR,eAQQ,QAAC,IAAD;AAAM,QAAA,EAAE,EAAC,OAAT;AAAA,+BACI;AAAQ,UAAA,SAAS,EAAC,oBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cARR;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,gBAgBI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,kBAEQF,QAAQ,CAACwB,GAAT,CAAc,CAACC,cAAD,EAAiBC,KAAjB,kBACV,QAAC,qBAAD;AAAmC,UAAA,cAAc,EAAED;AAAnD,WAA4BC,KAA5B;AAAA;AAAA;AAAA;AAAA,gBADJ;AAFR;AAAA;AAAA;AAAA;AAAA,cADJ,eAQI,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,cARJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAnBZ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAkCH;;GAxFQ7B,I;UAE0CN,W,EACRC,O;;;KAHlCK,I;AA0FT,SAASA,IAAT","sourcesContent":["import \"./Cart.css\"\r\nimport { useEffect } from \"react\";\r\nimport jwt_decode from \"jwt-decode\"\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\"\r\nimport { \r\n    useWishlist, \r\n    useCart, \r\n    HorizontalProductCard,\r\n    ShoppingBill \r\n} from \"../../index\"\r\nimport Lottie from 'react-lottie';\r\nimport CartLottie from \"../../Assets/Icons/cart.json\"\r\n\r\nfunction Cart()\r\n{\r\n    const { userWishlist, dispatchUserWishlist } = useWishlist()\r\n    const { userCart, dispatchUserCart } = useCart()\r\n    let cartObj = {\r\n        loop: true,\r\n        autoplay: true,\r\n        animationData : CartLottie,\r\n        rendererSettings: {\r\n          preserveAspectRatio: 'xMidYMid slice'\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const token=localStorage.getItem('token')\r\n\r\n        if(token)\r\n        {\r\n            const user = jwt_decode(token)\r\n            if(!user)\r\n            {\r\n                localStorage.removeItem('token')\r\n            }\r\n            else\r\n            {\r\n                if(userCart.length===0 || userWishlist.length===0)\r\n                {\r\n                    (async function getUpdatedWishlistAndCart()\r\n                    {\r\n                        let updatedUserInfo = await axios.get(\r\n                        \"https://bookztron-server.vercel.app/api/user\",\r\n                        {\r\n                            headers:\r\n                            {\r\n                            'x-access-token': localStorage.getItem('token'),\r\n                            }\r\n                        })\r\n\r\n                        if(updatedUserInfo.data.status===\"ok\")\r\n                        {\r\n                            dispatchUserWishlist({type: \"UPDATE_USER_WISHLIST\",payload: updatedUserInfo.data.user.wishlist})\r\n                            dispatchUserCart({type: \"UPDATE_USER_CART\",payload: updatedUserInfo.data.user.cart})\r\n                        }\r\n                    })()\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            dispatchUserWishlist({type: \"UPDATE_USER_WISHLIST\",payload: []})\r\n            dispatchUserCart({type: \"UPDATE_USER_CART\",payload: []})\r\n        }   \r\n    },[])\r\n\r\n    return (\r\n        <div className=\"cart-content-container\">\r\n            <h2>{userCart.length} items in Cart</h2>\r\n            {\r\n                userCart.length === 0\r\n                ? (\r\n                    <div className=\"empty-cart-message-container\">\r\n                            <Lottie options={cartObj}\r\n                                height={150}\r\n                                width={150}\r\n                                isStopped={false}\r\n                                isPaused={false}\r\n                            />\r\n                            <h2>Your cart is empty 🙃</h2>\r\n                            <Link to=\"/shop\">\r\n                                <button className=\" solid-primary-btn\">Go to shop</button>\r\n                            </Link>\r\n                    </div>\r\n                )\r\n                : (\r\n                    <div className=\"cart-grid\">\r\n                        <div className=\"cart-items-grid\">\r\n                            {\r\n                                userCart.map( (productDetails, index)=>    \r\n                                    <HorizontalProductCard key={index} productDetails={productDetails}/>\r\n                                )\r\n                            }\r\n                        </div>\r\n                        <ShoppingBill/>\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport { Cart }"]},"metadata":{},"sourceType":"module"}