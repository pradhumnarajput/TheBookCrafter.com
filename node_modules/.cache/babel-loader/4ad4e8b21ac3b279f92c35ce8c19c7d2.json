{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pradh\\\\Desktop\\\\devrev\\\\TheBookCrafter.com\\\\src\\\\Pages\\\\Orders\\\\Orders.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./Orders.css\";\nimport { useEffect } from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport axios from \"axios\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { ProductOrderCard, useWishlist, useCart, useOrders } from \"../../index\";\nimport Lottie from 'react-lottie';\nimport GuyWithBookLottie from \"../../Assets/Icons/guy_with_book.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Orders() {\n  _s();\n\n  const {\n    userWishlist,\n    dispatchUserWishlist\n  } = useWishlist();\n  const {\n    userCart,\n    dispatchUserCart\n  } = useCart();\n  const {\n    userOrders,\n    dispatchUserOrders\n  } = useOrders();\n  let guyWithBookObj = {\n    loop: true,\n    autoplay: true,\n    animationData: GuyWithBookLottie,\n    rendererSettings: {\n      preserveAspectRatio: 'xMidYMid slice'\n    }\n  };\n  const {\n    pathname\n  } = useLocation();\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      const user = jwt_decode(token);\n\n      if (!user) {\n        localStorage.removeItem('token');\n      } else {\n        if (userOrders.length === 0) {\n          (async function getUpdatedWishlistAndCart() {\n            let updatedUserInfo = await axios.get(\"https://bookztron-server.vercel.app/api/user\", {\n              headers: {\n                'x-access-token': localStorage.getItem('token')\n              }\n            });\n\n            if (updatedUserInfo.data.status === \"ok\") {\n              dispatchUserOrders({\n                type: \"UPDATE_USER_ORDERS\",\n                payload: updatedUserInfo.data.user.orders\n              });\n\n              if (userWishlist.length === 0) {\n                dispatchUserWishlist({\n                  type: \"UPDATE_USER_WISHLIST\",\n                  payload: updatedUserInfo.data.user.wishlist\n                });\n              }\n\n              if (userCart.length === 0) {\n                dispatchUserCart({\n                  type: \"UPDATE_USER_CART\",\n                  payload: updatedUserInfo.data.user.cart\n                });\n              }\n            }\n          })();\n        }\n      }\n    } else {\n      dispatchUserOrders({\n        type: \"UPDATE_USER_ORDERS\",\n        payload: []\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"orders-content-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [userOrders.length, \" \", userOrders === 1 ? \"item\" : \"items\", \" in your Orders\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), userOrders.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-orders-message-container\",\n      children: [/*#__PURE__*/_jsxDEV(Lottie, {\n        options: guyWithBookObj,\n        height: 350,\n        width: 350,\n        isStopped: false,\n        isPaused: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"You have not placed any orders\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/cart\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \" solid-primary-btn\",\n          children: \"Go to cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"orders-container\",\n      children: userOrders.map((productDetails, index) => /*#__PURE__*/_jsxDEV(ProductOrderCard, {\n        productDetails: productDetails\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 33\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Orders, \"6K9274h0RWMH1BT/1xFFmfpLINU=\", false, function () {\n  return [useWishlist, useCart, useOrders, useLocation];\n});\n\n_c = Orders;\nexport { Orders };\n\nvar _c;\n\n$RefreshReg$(_c, \"Orders\");","map":{"version":3,"sources":["C:/Users/pradh/Desktop/devrev/TheBookCrafter.com/src/Pages/Orders/Orders.jsx"],"names":["useEffect","jwt_decode","axios","Link","useLocation","ProductOrderCard","useWishlist","useCart","useOrders","Lottie","GuyWithBookLottie","Orders","userWishlist","dispatchUserWishlist","userCart","dispatchUserCart","userOrders","dispatchUserOrders","guyWithBookObj","loop","autoplay","animationData","rendererSettings","preserveAspectRatio","pathname","window","scrollTo","token","localStorage","getItem","user","removeItem","length","getUpdatedWishlistAndCart","updatedUserInfo","get","headers","data","status","type","payload","orders","wishlist","cart","map","productDetails","index"],"mappings":"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","sourcesContent":["import \"./Orders.css\"\r\nimport { useEffect } from \"react\";\r\nimport jwt_decode from \"jwt-decode\"\r\nimport axios from \"axios\";\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport { \r\n    ProductOrderCard,\r\n    useWishlist,\r\n    useCart,\r\n    useOrders\r\n} from \"../../index\"\r\nimport Lottie from 'react-lottie';\r\nimport GuyWithBookLottie from \"../../Assets/Icons/guy_with_book.json\"\r\n\r\nfunction Orders()\r\n{\r\n    const { userWishlist, dispatchUserWishlist } = useWishlist()\r\n    const { userCart, dispatchUserCart } = useCart()\r\n    const { userOrders, dispatchUserOrders } = useOrders()\r\n    let guyWithBookObj = {\r\n        loop: true,\r\n        autoplay: true,\r\n        animationData : GuyWithBookLottie,\r\n        rendererSettings: {\r\n          preserveAspectRatio: 'xMidYMid slice'\r\n        }\r\n    }\r\n    const { pathname } = useLocation();\r\n  \r\n    useEffect(() => {\r\n      window.scrollTo(0, 0);\r\n    }, [pathname]);\r\n\r\n    useEffect(()=>{\r\n        const token=localStorage.getItem('token')\r\n\r\n        if(token)\r\n        {\r\n            const user = jwt_decode(token)\r\n            if(!user)\r\n            {\r\n                localStorage.removeItem('token')\r\n            }\r\n            else\r\n            {\r\n                if(userOrders.length===0)\r\n                {\r\n                    (async function getUpdatedWishlistAndCart()\r\n                    {\r\n                        let updatedUserInfo = await axios.get(\r\n                        \"https://bookztron-server.vercel.app/api/user\",\r\n                        {\r\n                            headers:\r\n                            {\r\n                            'x-access-token': localStorage.getItem('token'),\r\n                            }\r\n                        })\r\n                        if(updatedUserInfo.data.status===\"ok\")\r\n                        {\r\n                            dispatchUserOrders({type: \"UPDATE_USER_ORDERS\",payload: updatedUserInfo.data.user.orders})                   \r\n                            if(userWishlist.length===0)\r\n                            {\r\n                                dispatchUserWishlist({type: \"UPDATE_USER_WISHLIST\",payload: updatedUserInfo.data.user.wishlist})\r\n                                \r\n                            }\r\n                            if(userCart.length===0)\r\n                            {\r\n                                dispatchUserCart({type: \"UPDATE_USER_CART\",payload: updatedUserInfo.data.user.cart})\r\n                            }\r\n                        }\r\n                    })()\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            dispatchUserOrders({type: \"UPDATE_USER_ORDERS\",payload: []})\r\n        }   \r\n    },[])\r\n\r\n    return (\r\n        <div className=\"orders-content-container\">\r\n            <h2>{userOrders.length} {userOrders===1?\"item\":\"items\"} in your Orders</h2>\r\n            {\r\n                userOrders.length === 0\r\n                ? (\r\n                    <div className=\"no-orders-message-container\">\r\n                            <Lottie options={guyWithBookObj}\r\n                                height={350}\r\n                                width={350}\r\n                                isStopped={false}\r\n                                isPaused={false}\r\n                            />\r\n                            <h2>You have not placed any orders</h2>\r\n                            <Link to=\"/cart\">\r\n                                <button className=\" solid-primary-btn\">Go to cart</button>\r\n                            </Link>\r\n                    </div>\r\n                )\r\n                : (\r\n                    <div className=\"orders-container\">\r\n                        {\r\n                            userOrders.map( (productDetails, index)=>    \r\n                                <ProductOrderCard key={index} productDetails={productDetails}/>\r\n                            )\r\n                        }\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport { Orders }"]},"metadata":{},"sourceType":"module"}